author: Mohammad Rahmani
core-version: >=5.2.5
dependents: $:/plugins/kookma/shiraz
description: Advanced search in fields using regular expression and tabular output
list: readme license history
name: Search in Fields
plugin-type: plugin
source: https://github.com/kookma/TW-Search
tags: 
title: $:/plugins/kookma/search
type: application/json
version: 0.9.0

{"tiddlers":{"$:/plugins/kookma/search/history":{"type":"text/vnd.tiddlywiki","text":"Full change log  https://kookma.github.io/TW-Search/#ChangeLog\n\n* ''0.7.0'' -- 2022.01.13 -- stable release with better UI\n* ''0.1.0'' -- 2022.01.04 -- beta public release\n"},"$:/plugins/kookma/search/images/regex.svg":{"type":"text/vnd.tiddlywiki","text":"<svg width=22pt viewBox=\"0 0 512 512\"height=22pt>\n  <path d=\"M309.677 349.209V230.914l-97.438 59.71-34.351-59.84L279.57 175.14l-101.682-56.47 34.525-58.75 97.264 59.447V.618h69.421v118.75l98.161-59.446L512 118.67l-102.14 56.47L512 230.785l-34.878 60.112-98.024-59.982V349.21h-69.42zm-164.504 89.587c0-55.67-60.68-90.652-108.962-62.817-48.281 27.835-48.281 97.8 0 125.635 48.282 27.835 108.962-7.148 108.962-62.818z\"/>\n"},"$:/plugins/kookma/search/images/table":{"caption":"table","collection":"","library":"Bootstrap","library_version":"1.3.0","type":"text/vnd.tiddlywiki","text":"<svg width=22pt class=\"tc-image-bts-table tc-image-button\"viewBox=\"0 0 16 16\"height=22pt><path d=\"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z\"/>"},"$:/plugins/kookma/search/license":{"type":"text/vnd.tiddlywiki","text":"Distributed under an MIT license.\n\nCopyright (c) 2022-2023 [[Mohammad Rahmani|https://github.com/kookma]]\n\n<<<\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n<<<"},"$:/plugins/kookma/search/macros/definition":{"tags":"$:/tags/Search/Macro","type":"text/vnd.tiddlywiki","text":"\\define searchTid()$:/temp/advancedsearch/input\n\\define optionTid()$:/config/search-in-fields/option\n\\define sFieldsTid()$:/config/search-in-fields/selected-fields\n\\define searchScopeTid()$:/config/Search/search-scope\n\\define primaryfieldsTid()$:/config/Search/primary-fields\n\\define excludefieldsTid()$:/config/Search/exclude-fields\n\\define columnsTid()$:/config/Search/tabular-columns\n\\define livepreviewTid()$:/config/Search/live-preview\n\\define searchScope()[subfilter{$(searchScopeTid)$}] -[[$(searchTid)$]]\n\\define allFields()$(searchScope)$+[fields[]sort[title]] -[subfilter{$(excludefieldsTid)$}]\n\\define selectedFields()[[$(sFieldsTid)$]indexes[]sort[title]]"},"$:/plugins/kookma/search/patterns/date-range":{"description":"Date range","pattern":"(^2019090|^2019091[0-5])","tags":"$:/tags/Search/Pattern","type":"text/vnd.tiddlywiki","text":"Find all tiddlers created on date range 1st to 15th September, 2019\n\n;Pattern\n: `(^2019090|^2019091[0-5])`\n\n;Explanation\n: `(|)` a capturing group. The `|` acts like a boolean OR. Matches the expression before or after the `|`.\n: `^` asserts position at start of the string\n: `2019090` matches characters 2019090 literally \n:: this returns any tiddler created in 2019, 09 (September). The next `0` stands for day number so it matchs 01 to 09 (the only day numbers with leading zero) \n: The `|` acts like a boolean OR. Matches the expression before or after the `|`.\n: `^` asserts position at start of the string\n: `2019091` matches characters 2019091 literally\n:: this returns any tiddler created in 2019, 09 (September). The next `1` stands for day number so it matchs and day number started with `1`\n: `[0-5]` match a single character present in the list below [0-5]. `[]` is a character set (character class)\n:: 0-5 a single character in the range between 0 (index 48) and 5 (index 53) (case sensitive)"},"$:/plugins/kookma/search/patterns/end-with-number":{"description":"Ending with numbers","pattern":"\\d+$","tags":"$:/tags/Search/Pattern","type":"text/vnd.tiddlywiki","text":"!! Match Lines Ending with Numbers\nThe numbers at the end of the line can be matched by using $ in the regex. The $ sign is used to express end of the line. The following regex can be used to match numbers at the end of the line.\n\n```\n\\d+$\n```\n\nor\n\n```\n\\[0-9]+$"},"$:/plugins/kookma/search/patterns/not-containing-string":{"description":"Match not containing string","pattern":"^((?!badword).)*$","tags":"$:/tags/Search/Pattern","type":"text/vnd.tiddlywiki","text":"!! Match string not containing string\nGiven a list of strings (words or other characters), only return the strings that do not match.\n\nRef: https://www.regextester.com/15"},"$:/plugins/kookma/search/patterns/only-lowercase-letters":{"description":"Only lowercase letters","pattern":"^[a-z]+$","tags":"$:/tags/Search/Pattern","type":"text/vnd.tiddlywiki","text":"; Pattern\n: `^[a-z]+$`\n\n; Explanation\n: `^` asserts position at start of the string\n: `[a-z]` matches a single character in the range between a and z (case sensitive)\n: `+` matches one or more repetitions of preceeding symbol (here lowercase characters)\n: `$` asserts position at end of the string"},"$:/plugins/kookma/search/patterns/only-numbers":{"description":"Match only numbers","pattern":"^\\d+$","tags":"$:/tags/Search/Pattern","type":"text/vnd.tiddlywiki","text":";Match Only Number Lines\n:In some cases we may need to match lines those only consist of numbers. These lines do not contains non-numeric characters. The ^ and $ are used to set start and end of line which consist of only numbers.\n\n```\n^\\d+$\n```\n\nor\n\n```\n^[0-9]+$"},"$:/plugins/kookma/search/patterns/start-with-number":{"description":"Starting with numbers","pattern":"^\\d+","tags":"$:/tags/Search/Pattern","type":"text/vnd.tiddlywiki","text":"!! Match Lines Starting with Numbers\nThe numbers can be located at the start of the line. These numbers can be matched by using the `^` sign which is used to express the start of the line.\n\n```\n^\\d+\n```\n\nor\n\n```\n^\\[0-9]+"},"$:/plugins/kookma/search/readme":{"type":"text/vnd.tiddlywiki","text":"; Search\r\nAdvanced search in fields, lets search in any fields with standard method or regular expressions.\n\n;Code and demo\r\nFor learning plugin features, syntax, tutorial and examples see the plugin demo and code pages\n\n* Demo: https://kookma.github.io/TW-Search/\r\n* Code: https://github.com/kookma/TW-Search\r\n"},"$:/plugins/kookma/search/styles/main":{"text":".tc-advanced-search input[type=radio]{width:auto}.tc-advanced-search input[type=checkbox]{width:auto}.kk-search-input{width:50%;min-width:240px}.kk-search-dropdown{max-height:calc(100vh - 2.5em);overflow-y:auto}.kk-search-dropdown input{width:auto;margin-left:20px}.kk-search-label{font-weight:bold;font-size:.9em;padding-left:6px;padding-right:6px;display:flex;justify-content:space-between}.kk-search-label .tc-btn-invisible{opacity:.4}.kk-search-label:hover .tc-btn-invisible{opacity:1}.kk-search-label .tc-btn-invisible svg{width:1em;height:1em}.kk-search-tubular{max-width:100%;overflow-x:auto}","tags":"$:/tags/Stylesheet","type":"text/css"},"$:/plugins/kookma/search/ui/AdvancedSearch/Fields":{"caption":"Fields","list-before":"$:/core/ui/AdvancedSearch/Filter","tags":"$:/tags/AdvancedSearch","type":"text/vnd.tiddlywiki","text":"{{$:/plugins/kookma/search/ui/inputs}}"},"$:/plugins/kookma/search/ui/ControlPanel/Settings":{"caption":"Search in Fields","list-after":"$:/core/ui/ControlPanel/Settings/TiddlyWiki","tags":"$:/tags/ControlPanel/SettingsTab $:/tags/MoreSideBar","type":"text/vnd.tiddlywiki","text":"\\import [[$:/tags/Search/Macro]tagging[]]\nThese settings let you customise the behaviour of Search in Fields plugin.\n\n---\n\n;Show Search setting in more sidebar\n:<$checkbox tiddler=\"$:/plugins/kookma/search/ui/ControlPanel/Settings\" tag=\"$:/tags/MoreSideBar\"> Show setting in more sidebar</$checkbox>\n\n; Enable Search in fields\n:<$checkbox tiddler=\"$:/plugins/kookma/search/ui/AdvancedSearch/Fields\" tag=\"$:/tags/AdvancedSearch\"> Enable Search in $:/AdvancedSearch</$checkbox>\n\n;Options\n:<label class=\"kk-switch-label\"><$link to=<<searchScopeTid>>>Search scope</$link></label><$edit-text tiddler=<<searchScopeTid>> field=\"text\" tag=input defualt=\"\" placeholder=\"enter a valid filter \" class=\"kk-search-input\"/> <$button tooltip=\"restore default\" class=\"tc-btn-invisible\" actions=\"\"\"<$action-deletetiddler $tiddler=<<searchScopeTid>>/>\"\"\">{{$:/core/images/refresh-button}}</$button>\n\n:<label class=\"kk-switch-label\"><$link to=<<primaryfieldsTid>>>Primary fields</$link></label><$edit-text tiddler=<<primaryfieldsTid>> field=\"text\" tag=input defualt=\"\" placeholder=\"enter field name, e.g fld01 [[field two]] \" class=\"kk-search-input\"/> <$button tooltip=\"restore default\" class=\"tc-btn-invisible\" actions=\"\"\"<$action-deletetiddler $tiddler=<<primaryfieldsTid>>/>\"\"\">{{$:/core/images/refresh-button}}</$button>\n\n:<label class=\"kk-switch-label\"><$link to=<<excludefieldsTid>>>Excluded fields</$link></label><$edit-text tiddler=<<excludefieldsTid>> field=\"text\" tag=input defualt=\"\" placeholder=\"enter field name, e.g fld01 [[field two]] \" class=\"kk-search-input\"/> <$button tooltip=\"restore default\" class=\"tc-btn-invisible\" actions=\"\"\"<$action-deletetiddler $tiddler=<<excludefieldsTid>>/>\"\"\">{{$:/core/images/refresh-button}}</$button>\n\n:<label class=\"kk-switch-label\"><$link to=<<columnsTid>>>Table columns</$link></label><$edit-text tiddler=<<columnsTid>> field=\"text\" tag=input defualt=\"\" placeholder=\"enter columns(fields) name\" class=\"kk-search-input\"/> <$button tooltip=\"restore default\" class=\"tc-btn-invisible\" actions=\"\"\"<$action-deletetiddler $tiddler=<<columnsTid>>/>\"\"\">{{$:/core/images/refresh-button}}</$button>\n\n; Enable live preview\n:<$checkbox tiddler=<<livepreviewTid>> field=\"text\" checked=\"yes\"> Enable live field preview in plain output</$checkbox>\n\n\n<style>\n.kk-switch-label{\n  width:120px;\n  display: inline-block;\n\tmargin-bottom:0.8em;\n}\n</style>\t"},"$:/plugins/kookma/search/ui/fields-selection":{"type":"text/vnd.tiddlywiki","text":"\\import [[$:/tags/Search/Macro]tagging[]]\n\\define clearfields(filter)\n<$list filter=\"[<sFieldsTid>indexes[]]:intersection[subfilter<__filter__>]+[nth[]][<disabledStatus>!match[yes]]+[count[]compare:integer:gteq[2]]\"variable=ignore>\n<$button tooltip=\"Uncheck selected fields\"class=tc-btn-invisible> {{$:/core/images/close-all-button}}\n<$list filter=<<__filter__>>variable=fieldname>\n<$action-setfield $tiddler=<<sFieldsTid>>$index=<<fieldname>>/>\n</$list>\n</$button>\n\n\\end\n<$let disabledStatus={{{[<sFieldsTid>get[allfld-status]match[all]then[yes]][<sFieldsTid>is[missing]then[yes]]}}}><span class=tc-popup-keep><$button popup=<<qualify [[$:/state/search/fieldsDropdown]]>>tooltip=\"select a search filter\"class=tc-btn-invisible>{{$:/core/images/down-arrow}}</$button></span><$reveal state=<<qualify [[$:/state/search/fieldsDropdown]]>>type=popup position=belowleft animate=yes class=tc-popup-keep tag=div><$let tv-show-missing-links=yes><div class=tc-block-dropdown-wrapper><div class=\"tc-block-dropdown tc-edit-type-dropdown kk-search-dropdown\"><div class=kk-search-label><span>Primary fields</span><$macrocall filter=\"[<primaryfieldsTid>get[text]enlist-input[]]\"$name=clearfields/></div><$list filter=\"[<primaryfieldsTid>get[text]enlist-input[]]\"variable=fieldname><$checkbox tiddler=<<sFieldsTid>>index=<<fieldname>>disabled=<<disabledStatus>>checked=x><$text text=<<fieldname>>/></$checkbox><br></$list><div class=kk-search-label><span>Other fields</span><$macrocall filter=\"[subfilter<allFields>] -[<primaryfieldsTid>get[text]enlist-input[]]\"$name=clearfields/></div><$checkbox tiddler=<<sFieldsTid>>field=allfld-status checked=all unchecked=\"\"default=all>*all -[excluded]</$checkbox><br><$list filter=\"[subfilter<allFields>]-[<primaryfieldsTid>get[text]enlist-input[]]\"variable=fieldname><$checkbox tiddler=<<sFieldsTid>>index=<<fieldname>>disabled=<<disabledStatus>>checked=x><$text text=<<fieldname>>/></$checkbox><br>"},"$:/plugins/kookma/search/ui/inputs":{"type":"text/vnd.tiddlywiki","text":"\\import [[$:/tags/Search/Macro]tagging[]]\n\nSearch in fields...&nbsp;<$transclude tiddler='$:/plugins/kookma/search/ui/options'mode=inline/>\n\n<div class='tc-search tc-advanced-search'><$edit-text tiddler=<<searchTid>>field=text type=search default=''placeholder='search terms'refreshTitle='$:/temp/advancedsearch/refresh'focus={{$:/config/Search/AutoFocus}}inputActions='<$action-setfield $tiddler=\"$:/temp/advancedsearch\" text={{{ [<searchTid>get[text]] }}}/>'tag=input/>{{||$:/plugins/kookma/search/ui/fields-selection}}<$list filter='[<optionTid>get[search-mode]match[regexp]]'variable=ignore>{{||$:/plugins/kookma/search/ui/pattern-selection}}</$list><$reveal stateTitle=<<searchTid>>stateField=text text=''type=nomatch><$list filter='[[$:/plugins/kookma/shiraz]!is[missing]]:filter[lookup:no[$:/config/Plugins/Disabled/]match[no]]'variable=ignore><$button tooltip='toggle tubular/plain format'class=tc-btn-invisible><$action-listops $tiddler=<<optionTid>>$field=format $subfilter=+[toggle[tabular]]/>{{$:/plugins/kookma/search/images/table}}</$button></$list><$button tooltip='clear search box'class=tc-btn-invisible><$action-setfield $tiddler=<<searchTid>>$value=''$field=text/>{{$:/core/images/close-button}}</$button></$reveal></div>\n\n<div class=tc-search-results><$transclude tiddler='$:/plugins/kookma/search/ui/results'mode=block/>"},"$:/plugins/kookma/search/ui/options":{"type":"text/vnd.tiddlywiki","text":"\\import [[$:/tags/Search/Macro]tagging[]]\n<span class=tc-advanced-search-check><$checkbox field=case-sensitive tiddler=<<optionTid>>disabled={{{[<optionTid>get[search-mode]match[regexp]then[yes]]}}}checked=casesensitive> case sensitive</$checkbox></span> &nbsp;<span title=\"treats the search string as a list of tokens\"class=tc-advanced-search-check><$radio field=search-mode tiddler=<<optionTid>>value=words default=words> words</$radio></span> &nbsp;\n<span title=\"requires an exact match\"class=tc-advanced-search-check><$radio field=search-mode tiddler=<<optionTid>>value=literal> literal</$radio></span> &nbsp;<span title=\"treats the search string as a regular expression\"class=tc-advanced-search-check><$radio field=search-mode tiddler=<<optionTid>>value=regexp> regexp</$radio></span> &nbsp;\n"},"$:/plugins/kookma/search/ui/pattern-selection":{"type":"text/vnd.tiddlywiki","text":"\\import [[$:/tags/Search/Macro]tagging[]]\n<span class=tc-popup-keep>\n<$button popup=<<qualify'$:/state/search/patternDropdown'>>tooltip='select a regex pattern'class=tc-btn-invisible>\n{{$:/plugins/kookma/search/images/regex.svg}}\n</$button>\n</span>\n\n<$reveal state=<<qualify'$:/state/search/patternDropdown'>>type=popup position=belowleft animate=yes>\n<$let tv-show-missing-links=yes>\n<$linkcatcher actions=\"<$action-setfield $tiddler='$:/temp/advancedsearch'text=<<navigateTo>>/><$action-setfield $tiddler='$:/temp/advancedsearch/input'text=<<navigateTo>>/><$action-setfield $tiddler='$:/temp/advancedsearch/refresh'text=yes/><$action-sendmessage $param='.tc-advanced-search input'$message=tm-focus-selector/>\">\n<div class=tc-block-dropdown-wrapper>\n<div class='tc-block-dropdown tc-edit-type-dropdown'>\n<$list filter='[[$:/tags/Search/Pattern]tagging[]sort[description]]'><$link to={{!!pattern}}><$transclude field=description/></$link>\n</$list>\n</div>\n</div>\n</$linkcatcher>\n</$let>\n"},"$:/plugins/kookma/search/ui/results":{"type":"text/vnd.tiddlywiki","text":"\\import [[$:/tags/Search/Macro]tagging[]]\n\\define field-search(field)\n<$let regexpFilter=\"\"\"[subfilter<searchScope>regexp:$field$<search-terms>]\"\"\"normalFilter=\"\"\"[subfilter<searchScope>search:$field$:$(flag-list)$<search-terms>]\"\"\"searchFilter={{{[<search-mode>match[regexp]then<regexpFilter>else<normalFilter>]}}}matches={{{[subfilter<searchFilter>count[]]}}}resultformat={{{[<optionTid>get[format]]}}}tableCosl={{{[<columnsTid>get[text]]}}}pagingStat={{{[<matches>compare:integer:gt[25]then[yes]else[no]]}}}>\n<$list filter='[subfilter<searchFilter>nth[]]'>\n<$reveal default=<<resultformat>>type=match text=tabular tag=div class=kk-search-tubular>\n<b>$field$ <small>(<$text text=<<matches>>/>)</small></b>\n<$macrocall $name=table-dynamic filter=<<searchFilter>>fields=<<tableCosl>>class=w-100 pagination=<<pagingStat>>stateTiddler=\"advancedsearch/$field$\"editButton=no/>\n</$reveal>\n<$reveal default=<<resultformat>>type=nomatch text=tabular>\n<dl>\n<dt>$field$ <small>(<$text text=<<matches>>/>)</small></dt>\n<$list filter=<<searchFilter>>>\n<dd><span title={{{[<livepreviewTid>get[text]match[yes]then{!!$field$}]}}}><$link/></span></dd>\n</$list>\n</dl>\n</$reveal>\n</$list>\n\n\n\\end\n<$let selectedFields={{{[<sFieldsTid>!is[missing]then<selectedFields>else<allFields>]}}}fields-filter={{{[<sFieldsTid>get[allfld-status]match[all]then<allFields>else<selectedFields>]}}}casesensitive={{{[<optionTid>get[case-sensitive]]}}}search-mode={{{[<optionTid>get[search-mode]]:else[[words]]}}}flag-list={{{[<search-mode>][<casesensitive>]+[!is[blank]join[,]]}}}search-terms={{{[<searchTid>get[text]else[]]}}}filterMinLength={{$:/config/Search/MinLength}}>\n\n<$list filter='[<search-terms>minlength<filterMinLength>nth[]]'emptyMessage={{{[<search-terms>!is[blank]then[Search term is too short]]}}}variable=ignore>\n<!---->\n<div class=tc-search-results>\n<$list filter='[subfilter<fields-filter>]'variable=field>\n<$macrocall field=<<field>>$name=field-search/>\n</$list>\n</div>\n"},"$:/config/Search/live-preview":{"type":"text/vnd.tiddlywiki"},"$:/config/Search/search-scope":{"type":"text/vnd.tiddlywiki","text":"[all[tiddlers]!is[system]]"},"$:/config/Search/primary-fields":{"type":"text/vnd.tiddlywiki","text":"title tags text caption"},"$:/config/Search/exclude-fields":{"type":"text/vnd.tiddlywiki","text":"text"},"$:/config/Search/tabular-columns":{"type":"text/vnd.tiddlywiki","text":"tbl-expand title tags created"}}}